!function(e,n){e.autoPageReload=function(e){e=e||9e5;var a=(new Date).getTime();n(document.body).bind("mousemove keypress",function(){a=(new Date).getTime()}),setInterval(function(){(new Date).getTime()-a>=e&&window.location.reload(!0)},1e3)}}(window.app=window.app||{},jQuery),function(e){var a;e.config={init:function(e){a=e},getPlayerUrl:function(){return a}}}(window.app=window.app||{},jQuery),function(e,n){e.registerLeagueMenuBar=function(){var a=n("#leagueMenuBar"),e=(n(document).keydown(function(e){e.ctrlKey&&a.toggle()}),new window.Hammer.Manager(document.getElementById("scoreBox")));e.add(new window.Hammer.Tap({event:"doubletap",taps:2})),e.on("doubletap",function(){a.toggle()}),a.find("#replayButton").click(function(){return console.log("Restoring last players ..."),n("#redPlayer").val(localStorage.getItem("lastRedPlayer")),n("#bluePlayer").val(localStorage.getItem("lastBluePlayer")),n("#redTeamOffense").val(localStorage.getItem("lastRedOffensePlayer")),n("#redTeamDefense").val(localStorage.getItem("lastRedDefensePlayer")),n("#blueTeamOffense").val(localStorage.getItem("lastBlueOffensePlayer")),n("#blueTeamDefense").val(localStorage.getItem("lastBlueDefensePlayer")),!1}),a.find("#switchSidesButton").click(function(){console.log("Switching sides ...");var e=n("#redPlayer").val();return n("#redPlayer").val(n("#bluePlayer").val()),n("#bluePlayer").val(e),e=n("#redTeamOffense").val(),n("#redTeamOffense").val(n("#blueTeamOffense").val()),n("#blueTeamOffense").val(e),e=n("#redTeamDefense").val(),n("#redTeamDefense").val(n("#blueTeamDefense").val()),n("#blueTeamDefense").val(e),!1}),a.find("#switchPositionsButton").click(function(){console.log("Switching positions ...");var e=n("#redTeamOffense").val();return n("#redTeamOffense").val(n("#redTeamDefense").val()),n("#redTeamDefense").val(e),e=n("#blueTeamOffense").val(),n("#blueTeamOffense").val(n("#blueTeamDefense").val()),n("#blueTeamDefense").val(e),!1})}}(window.app=window.app||{},jQuery),function(e,l){function r(e,a){var n=l("<tr />");return n.append(l("<th />").html(e)),n.append(l("<td />").addClass("text-right").html(a)),n}e.renderLeagueStatistics=function(e,a){e=l(e).html("");var n=l("<table />").addClass("table");n.append(r("# games:",a.games+" (last "+a.daysForStatistics+" days)")),n.append(r("# players:",'<span class="team-red">'+a.redPlayers+'</span> : <span class="team-blue">'+a.bluePlayers+"</span>")),n.append(r("# goals:",'<span class="team-red">'+a.redGoals+'</span> : <span class="team-blue">'+a.blueGoals+"</span>")),n.append(r("# wins:",'<span class="team-red">'+a.redWins+'</span> : <span class="team-blue">'+a.blueWins+"</span>")),n.append(r("Ã˜ goal difference:",a.goalDifference.toFixed(2))),n.append(r("Most active player:",a.mostActivePlayer)),e.append(n)}}(window.app=window.app||{},jQuery),function(s,t){s.renderPlayerRanking=function(r,e){r=t(r).addClass("ranking").addClass("player-ranking").html(""),t.each(e,function(e,a){var n=t("<li />"),l=(n.append(t('<a href="'+s.config.getPlayerUrl().replace("[id]",a.id)+'"></a>').append(t("<img />").attr("src","data:image/png;base64,"+a.image).addClass("ranking-image"))),n.append(t("<div />").html(a.name).addClass("ranking-name")),t("<div />").addClass("ranking-score"));l.append(t("<span />").html(a.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),l.append(t("<span />").html(a.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),n.append(l),r.append(n)})}}(window.app=window.app||{},jQuery),function(d,c){function p(e){var a=c(e).val();return""===a?(c(e).focus(),null):a}d.displayScoreForTwoPlayers=function(){c("#twoPlayersScore").show(),c("#fourPlayersScore").hide(),c("#redTeamScore").val(""),c("#blueTeamScore").val(""),c("#redTeamOffense").val(""),c("#redTeamDefense").val(""),c("#blueTeamOffense").val(""),c("#blueTeamDefense").val("")},d.displayScoreForFourPlayers=function(){c("#twoPlayersScore").hide(),c("#fourPlayersScore").show(),c("#redPlayerScore").val(""),c("#bluePlayerScore").val(""),c("#redPlayer").val(""),c("#bluePlayer").val("")},d.initScore=function(o){n=c("#playersDatalist"),d.apiHub.client.reloadPlayers=function(e){console.log("Refreshing players datalist ..."),n.empty(),c.each(e.players,function(e,a){n.append(c("<option></option>").html(a))})},d.apiHub.client.scorePosted=function(){console.log("Score posted.")},c("#twoPlayersButton").change(function(){d.displayScoreForTwoPlayers()}),c("#fourPlayersButton").change(function(){d.displayScoreForFourPlayers()});var n,i=c("#submitScore");i.click(function(){var e=null;if(localStorage.removeItem("lastRedPlayer"),localStorage.removeItem("lastBluePlayer"),localStorage.removeItem("lastRedOffensePlayer"),localStorage.removeItem("lastRedDefensePlayer"),localStorage.removeItem("lastBlueOffensePlayer"),localStorage.removeItem("lastBlueDefensePlayer"),c("#twoPlayersScore").is(":visible")){var a=p("#redPlayerScore"),n=p("#bluePlayerScore"),l=p("#redPlayer"),r=p("#bluePlayer");if(a&&n&&l&&r){if(l===r)return void alert("Very funny. Same players not allowed.");e={redPlayerScore:a,bluePlayerScore:n,redPlayer:l,bluePlayer:r},localStorage.setItem("lastRedPlayer",l),localStorage.setItem("lastBluePlayer",r)}}else{var a=p("#redTeamScore"),n=p("#blueTeamScore"),l=p("#redTeamOffense"),r=p("#blueTeamOffense"),s=p("#redTeamDefense"),t=p("#blueTeamDefense");if(a&&n&&l&&r&&s&&t){if(l===s||l===r||l===t||s===r||s===t||r===t)return void alert("Very funny. Same players not allowed.");e={redTeamScore:a,blueTeamScore:n,redTeamOffense:l,blueTeamOffense:r,redTeamDefense:s,blueTeamDefense:t},localStorage.setItem("lastRedOffensePlayer",l),localStorage.setItem("lastRedDefensePlayer",s),localStorage.setItem("lastBlueOffensePlayer",r),localStorage.setItem("lastBlueDefensePlayer",t)}}e&&(i.attr("disabled",!0).html('<span class="glyphicon glyphicon-hourglass"></span> Submitting ...'),d.apiHub.server.postScore(o,e).done(function(){c(".player").val(""),c(".score").val(""),i.attr("disabled",!0).html('<span class="glyphicon glyphicon-ok-circle"></span> Saved!'),setTimeout(function(){i.attr("disabled",!1).html("Submit")},5e3)}).fail(function(e){i.attr("disabled",!1).html("Submit"),alert("Post score failed.\n\n"+e)}))})}}(window.app=window.app||{},jQuery),function(n,l){n.initSignalR=function(){n.apiHub=l.connection.apiHub,n.apiHub.client.leagueJoined=function(e){console.log("League "+e+" joined.")},n.apiHub.client.reloadStatistics=function(){console.log("relead stats, but from league hub.")}},n.connectSignalR=function(e,a){console.log("Connecting to SignalR ..."),l.connection.hub.start().done(function(){n.apiHub.server.joinLeague(e).done(function(){console.log("League "+e+" joined."),a&&a()})})},n.apiHub=null}(window.app=window.app||{},jQuery),function(s,t){s.renderTeamRanking=function(r,e){r=t(r).addClass("ranking").addClass("team-ranking").html(""),t.each(e,function(e,a){var n=t("<li />"),l=(n.append(t('<a href="'+s.config.getPlayerUrl().replace("[id]",a.player1.id)+'"></a>').append(t("<img />").attr("src","data:image/png;base64,"+a.player1.image).addClass("ranking-image"))),n.append(t('<a href="'+s.config.getPlayerUrl().replace("[id]",a.player2.id)+'"></a>').append(t("<img />").attr("src","data:image/png;base64,"+a.player2.image).addClass("ranking-image"))),n.append(t("<div />").html(a.player1.name).addClass("ranking-name")),n.append(t("<div />").html(a.player2.name).addClass("ranking-name")),t("<div />").addClass("ranking-score"));l.append(t("<span />").html(a.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),l.append(t("<span />").html(a.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),n.append(l),r.append(n)})}}(window.app=window.app||{},jQuery);